{% extends "base.html" %}
{% block title %}Ausgabe hinzufügen{% endblock %}

{% block content %}
<h2>Neue Ausgabe hinzufügen</h2>

<!-- Flash-Meldungen -->
{% with messages = get_flashed_messages() %}
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-warning">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}

<form method="POST">
  <div class="mb-3">
    <label for="title" class="form-label">Titel der Ausgabe</label>
    <input type="text" class="form-control" name="title" id="title" placeholder="z.B. Pizza, Benzin" required>
  </div>

  <div class="mb-3">
    <label for="amount" class="form-label">Betrag (€)</label>
    <input type="number" step="0.01" class="form-control" name="amount" id="amount" required>
  </div>

  <div class="mb-3">
    <label for="payer" class="form-label">Bezahlt von</label>
    <select name="payer" id="payer" class="form-select" required>
      {% for user in participants %}
        <option value="{{ user.id }}">{{ user.username }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="mb-3">
    <label class="form-label">Aufteilen auf:</label>
    {% for user in participants %}
      <div class="form-check">
        <input class="form-check-input" type="checkbox" name="split_users" value="{{ user.id }}" id="user{{ user.id }}" checked>
        <label class="form-check-label" for="user{{ user.id }}">
          {{ user.username }}
        </label>
      </div>
    {% endfor %}
  </div>

  <button type="submit" class="btn btn-success">Speichern</button>
  <a href="{{ url_for('events.show_event', event_id=event_id) }}" class="btn btn-secondary">Abbrechen</a>
</form>
{% endblock %}
